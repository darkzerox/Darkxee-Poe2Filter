name: Discord Tag Notification

on:
  push:
    tags:
      - v*

jobs:
  notify-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Debug event
        run: |
          echo "Event name: ${{ github.event_name }}"
          echo "Tag: ${{ github.ref_name }}"

      - name: Send Discord notification
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "🏷️ New filter version pushed: ${{ github.ref_name }} >> download now <<"
          description: "A new version filter has been pushed to the repository."
          url: "https://github.com/${{ github.repository }}/releases/tag/${{ github.ref_name }}"
          color: 5814783
          username: "DZX Filter Release Version"
          avatar_url: "https://raw.githubusercontent.com/${{ github.repository }}/master/dzx_filter/images/dzx-poe2-filter-logo.png"
          fields: |
            [
              { "name": "Tag", "value": "${{ github.ref_name }}", "inline": true },
              { "name": "ผู้สร้าง", "value": "${{ github.actor }}", "inline": true },
              { "thumbnail": "https://raw.githubusercontent.com/${{ github.repository }}/master/dzx_filter/images/dzx-poe2-filter-logo.png" }
            ]
